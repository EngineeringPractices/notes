分布式系统架构 （Distributed System Architect）
===========================================

# 为何要使用分布式系统

基本需求

* 增大系统容量
  - 单台机器无法满足业务需求，需要水平拆分
* 加强系统可用性
  - 不存在单点故障，不中断服务（冗余）

其他优势

* 模块化，重用度高
* 系统扩展性高
* 服务拆分，各模块可以并行开发、发布，速度提升
* 改善团队协作流程

缺点

* 经常发布，部署复杂
* 架构设计难度增加
* 运维复杂
* 系统延迟大
* 技术多样，开放
* 测试，查错复杂

难点在于“架构设计”，“管理（服务治理）” ，和“运维”。

分布式历史

* SOA面向服务架构：SOAP，WSDL，XML，Bus
  - 可重用，模块化，可组合，互操作（component + bus）
  - 符合开放标准
  - 服务识别，分类，提供，发布，监控，跟踪

  使用标准协议或中间件联动其他关联的服务（控制反转，依赖倒置）

* 微服务架构: Docker, k8s, ...
  - 每个服务自包含
  - 服务编排，整合引擎

# 解决分布式系统性能问题（高性能，高吞吐量）

* 缓存系统
  - 浏览器缓存，服务器缓存，数据库，文件系统，CPU
  - 分布式缓存集群（Proxy负责缓存分片，路由）
* 负载均衡系统
  - 水平扩展
  - 高可用
* 异步调用
  - 消息队列（削峰，避免服务阻塞，提高吞吐量）
  - 实时性变差，有时需要消息持久化（导致有状态）
* 数据分区、镜像
  - 地理位置分区，流量大小分区
  - 数据路由
  - 数据镜像的数据一致性问题

# 解决分布式系统的稳定性（高可用）

* 服务拆分
  - 故障隔离
  - 服务模块重用
  - 引入调用延迟
* 服务冗余
  - 去除单点故障
  - 支持弹性伸缩（可扩展行)
* 限流、降级
  - 确保重要服务
  - 确保流量过大系统不至于雪崩
* 高可用架构
  - 多租户隔离
  - 灾备多活
* 高可运维
  - CI/CD：流畅的发布管线，足够的自动化测试，灰度发布。

# 分布式系统关键技术
